<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è®¡æ—¶å™¨è®¾ç½®é›†æˆæŒ‡å—</title>
    <style>
        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #4CAF50;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .section {
            margin-bottom: 25px;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 5px;
            border-left: 4px solid #4CAF50;
        }
        
        .code-block {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 4px;
            overflow-x: auto;
            font-family: Consolas, Monaco, 'Andale Mono', monospace;
            line-height: 1.5;
            font-size: 14px;
        }
        
        .btn {
            display: inline-block;
            padding: 8px 16px;
            margin: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>è®¡æ—¶å™¨è®¾ç½®é›†æˆæŒ‡å—</h1>
        
        <div class="section">
            <h2>é—®é¢˜åˆ†æ</h2>
            <p>æ ¹æ®åˆ†æï¼Œè®¡æ—¶å™¨è®¾ç½®ä¿å­˜åŠŸèƒ½å­˜åœ¨ä»¥ä¸‹é—®é¢˜ï¼š</p>
            <ol>
                <li><strong>å˜é‡åˆå§‹åŒ–é—®é¢˜</strong>ï¼štimerSettings å˜é‡åœ¨è¢«ä½¿ç”¨å‰æœªåˆå§‹åŒ–ï¼Œå¯¼è‡´é”™è¯¯ "Cannot access 'timerSettings' before initialization"</li>
                <li><strong>äº‹ä»¶å¤„ç†å™¨é—®é¢˜</strong>ï¼šä¿å­˜æŒ‰é’®çš„äº‹ä»¶å¤„ç†å™¨å¯èƒ½æœªæ­£ç¡®ç»‘å®šæˆ–è§¦å‘æ—¶å­˜åœ¨é”™è¯¯</li>
                <li><strong>éŸ³é¢‘å¾ªç¯æ’­æ”¾é—®é¢˜</strong>ï¼šåŸæœ‰çš„éŸ³é¢‘å¾ªç¯æ’­æ”¾åŠŸèƒ½å®ç°ä¸å®Œæ•´</li>
            </ol>
        </div>
        
        <div class="section">
            <h2>è§£å†³æ–¹æ¡ˆ</h2>
            <p>æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªè¡¥ä¸è„šæœ¬æ¥è§£å†³ä¸Šè¿°é—®é¢˜ï¼š</p>
            <ol>
                <li>ç¡®ä¿ timerSettings å˜é‡åœ¨ä½¿ç”¨å‰å·²æ­£ç¡®åˆå§‹åŒ–</li>
                <li>ä½¿ç”¨æ›´å¯é çš„æ–¹å¼ä¸ºä¿å­˜æŒ‰é’®ç»‘å®šäº‹ä»¶å¤„ç†å™¨</li>
                <li>é€šè¿‡å¼•å…¥ AudioHelper æ¥å¢å¼ºéŸ³é¢‘å¾ªç¯æ’­æ”¾åŠŸèƒ½</li>
                <li>æä¾›å¤‡ç”¨æ–¹æ¡ˆç¡®ä¿å…³é”®åŠŸèƒ½å³ä½¿åœ¨å‡ºé”™æƒ…å†µä¸‹ä¹Ÿèƒ½å·¥ä½œ</li>
            </ol>
        </div>
        
        <div class="section">
            <h2>é›†æˆæ–¹æ³•</h2>
            <p>è¯·æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤å°†è¡¥ä¸è„šæœ¬é›†æˆåˆ°ç°æœ‰é¡µé¢ä¸­ï¼š</p>
            
            <h3>1. åœ¨ç°æœ‰é¡µé¢ä¸­å¼•å…¥è¡¥ä¸è„šæœ¬</h3>
            <p>åœ¨é¡µé¢çš„ &lt;head&gt; æˆ– &lt;body&gt; åº•éƒ¨æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š</p>
            <div class="code-block">
<pre>&lt;!-- å¼•å…¥è®¡æ—¶å™¨è®¾ç½®ä¿®å¤è¡¥ä¸ --&gt;
&lt;script src="/js/timer-settings-patch.js"&gt;&lt;/script&gt;</pre>
            </div>
            
            <h3>2. ç¡®ä¿è„šæœ¬é¡ºåºæ­£ç¡®</h3>
            <p>ç¡®ä¿è¡¥ä¸è„šæœ¬åœ¨ä»¥ä¸‹è„šæœ¬<strong>ä¹‹å</strong>åŠ è½½ï¼š</p>
            <div class="code-block">
<pre>&lt;script src="/js/audio-autoplay.js"&gt;&lt;/script&gt;
&lt;script src="/js/timer-settings-fix.js"&gt;&lt;/script&gt;</pre>
            </div>
            
            <h3>3. æ·»åŠ  AudioHelper æ”¯æŒï¼ˆå¯é€‰ä½†æ¨èï¼‰</h3>
            <p>ä¸ºè·å¾—æ›´å¥½çš„éŸ³é¢‘å¾ªç¯æ’­æ”¾ä½“éªŒï¼Œè¯·æ·»åŠ ï¼š</p>
            <div class="code-block">
<pre>&lt;script src="/js/audio-helper.js"&gt;&lt;/script&gt;</pre>
            </div>
        </div>
        
        <div class="section">
            <h2>ç¤ºä¾‹ä»£ç </h2>
            <p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªå®Œæ•´çš„é¡µé¢é›†æˆç¤ºä¾‹ï¼š</p>
            <div class="code-block">
<pre>&lt;!DOCTYPE html&gt;
&lt;html lang="zh-CN"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;è®¡æ—¶å™¨åº”ç”¨&lt;/title&gt;
    
    &lt;!-- å…¶ä»–CSSå’Œå…ƒæ•°æ® --&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;!-- é¡µé¢å†…å®¹ --&gt;
    
    &lt;!-- åŸºç¡€è„šæœ¬ --&gt;
    &lt;script src="/js/audio-autoplay.js"&gt;&lt;/script&gt;
    &lt;script src="/js/timer-settings-fix.js"&gt;&lt;/script&gt;
    
    &lt;!-- å¢å¼ºåŠŸèƒ½ --&gt;
    &lt;script src="/js/audio-helper.js"&gt;&lt;/script&gt;
    
    &lt;!-- ä¿®å¤è¡¥ä¸ï¼ˆæ”¾åœ¨æœ€åç¡®ä¿èƒ½è¦†ç›–ä¹‹å‰çš„å®šä¹‰ï¼‰ --&gt;
    &lt;script src="/js/timer-settings-patch.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</pre>
            </div>
        </div>
        
        <div class="section">
            <h2>åŠŸèƒ½éªŒè¯</h2>
            <p>è¦éªŒè¯ä¿®å¤æ˜¯å¦æˆåŠŸï¼Œè¯·æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
            <ol>
                <li>æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰ "è®¡æ—¶å™¨è®¾ç½®è¡¥ä¸å·²åŠ è½½" çš„æ—¥å¿—</li>
                <li>ç‚¹å‡»è®¾ç½®æŒ‰é’®å¹¶å°è¯•ä¿å­˜è®¾ç½®ï¼ŒæŸ¥çœ‹æ˜¯å¦æœ‰æˆåŠŸæç¤º</li>
                <li>åˆ›å»ºä¸€ä¸ªè®¡æ—¶å™¨å¹¶ç­‰å¾…å®Œæˆï¼Œæ£€æŸ¥éŸ³é¢‘æ˜¯å¦æ­£å¸¸å¾ªç¯æ’­æ”¾</li>
                <li>æ£€æŸ¥æ§åˆ¶å°æ˜¯å¦ä¸å†æ˜¾ç¤º "Cannot access 'timerSettings' before initialization" é”™è¯¯</li>
            </ol>
            
            <button class="btn" id="testButton">æµ‹è¯•è¡¥ä¸åŠ è½½</button>
            <div id="testResult" style="margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 4px; display: none;"></div>
        </div>
    </div>
    
    <script>
        // ç®€å•æµ‹è¯•è„šæœ¬
        document.getElementById('testButton').addEventListener('click', function() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '';
            
            // æµ‹è¯•æ˜¯å¦å·²åŠ è½½AudioAutoplay
            if (window.AudioAutoplay) {
                resultDiv.innerHTML += '<p>âœ… AudioAutoplay å·²åŠ è½½</p>';
            } else {
                resultDiv.innerHTML += '<p>âŒ AudioAutoplay æœªåŠ è½½</p>';
            }
            
            // æµ‹è¯•æ˜¯å¦å·²åŠ è½½AudioHelper
            if (window.AudioHelper) {
                resultDiv.innerHTML += '<p>âœ… AudioHelper å·²åŠ è½½</p>';
            } else {
                resultDiv.innerHTML += '<p>âŒ AudioHelper æœªåŠ è½½ - è¯·ç¡®ä¿å·²å¼•å…¥audio-helper.js</p>';
                
                // å°è¯•åŠ¨æ€åŠ è½½
                resultDiv.innerHTML += '<p>ğŸ”„ å°è¯•åŠ¨æ€åŠ è½½ AudioHelper...</p>';
                const script = document.createElement('script');
                script.src = '/js/audio-helper.js';
                script.onload = function() {
                    resultDiv.innerHTML += '<p>âœ… AudioHelper å·²æˆåŠŸåŠ¨æ€åŠ è½½</p>';
                };
                script.onerror = function() {
                    resultDiv.innerHTML += '<p>âŒ AudioHelper åŠ¨æ€åŠ è½½å¤±è´¥</p>';
                };
                document.head.appendChild(script);
            }
            
            // æµ‹è¯•timerSettingså˜é‡
            if (typeof window.timerSettings !== 'undefined') {
                resultDiv.innerHTML += '<p>âœ… timerSettings å·²æ­£ç¡®åˆå§‹åŒ–</p>';
            } else {
                resultDiv.innerHTML += '<p>âŒ timerSettings æœªåˆå§‹åŒ–</p>';
                
                // å°è¯•åŠ¨æ€åŠ è½½è¡¥ä¸
                resultDiv.innerHTML += '<p>ğŸ”„ å°è¯•åŠ¨æ€åŠ è½½è¡¥ä¸è„šæœ¬...</p>';
                const script = document.createElement('script');
                script.src = '/js/timer-settings-patch.js';
                script.onload = function() {
                    if (typeof window.timerSettings !== 'undefined') {
                        resultDiv.innerHTML += '<p>âœ… è¡¥ä¸å·²åŠ è½½ï¼ŒtimerSettings å·²åˆå§‹åŒ–</p>';
                    } else {
                        resultDiv.innerHTML += '<p>âŒ è¡¥ä¸å·²åŠ è½½ï¼Œä½† timerSettings ä»æœªåˆå§‹åŒ–</p>';
                    }
                };
                script.onerror = function() {
                    resultDiv.innerHTML += '<p>âŒ è¡¥ä¸è„šæœ¬åŠ è½½å¤±è´¥</p>';
                };
                document.head.appendChild(script);
            }
        });
    </script>
    
    <!-- å¼•å…¥ç›¸å…³è„šæœ¬è¿›è¡Œæµ‹è¯• -->
    <script src="/js/audio-autoplay.js"></script>
    <script src="/js/audio-helper.js"></script>
    <script src="/js/timer-settings-patch.js"></script>
</body>
</html>